package com.dongfang.advanced.jvm.memorystructure;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 * Java Virtual Machine Stacks （Java 虚拟机栈）
 *      1、每个线程运行时所需要的内存，称为虚拟机栈
 *      2、每个栈由多个栈帧组成，一个栈帧是方法运行时，参数，局部返回，返回值地址所占用的内存
 *      3、每个线程只有一个活动栈帧，就是栈顶部正在执行的方法，
 *
 *      问题：
 *          1、垃圾回收是否涉及栈内存？
 *              方法调用完后，方法所占用的帧会自动被销毁
 *          2、栈内存分配越大越好吗？
 *              -Xss 设置栈一个线程的栈内存大小，过大会导致无法创建大量线程
 *          3、方法内的局部变量是否是线程安全？
 *              方法内的局部变量是线程私有的，不会有其他线程对其进行修改操作，因此是安全的，共享的东西才需要考虑线程安全
 *              一个变量是不是线程安全，
 *                      1、是不是局部变量
 *                      2、是不是逃离了方法的作用范围，如入参与返回值，有可能 会被 其他线程修改
 *
 */
public class JvmStackDemo {
    public static void main(String[] args) {
        List<Integer> list = method1(30);
    }

    private static List<Integer> method1(int len) {

        ArrayList<Integer> list = new ArrayList<>(len);
        int i = method2(2, 3);
        return list;
    }

    private static int method2(int i, int j) {
        int k = i + j;
        return k;
    }


    private void append1() {
        StringBuilder sb = new StringBuilder();
        sb.append(1);
        sb.append(2);
        sb.append(3);
        System.out.println(sb.toString());
    }

    /**
     * StringBuilder由外部传入，并不是线程私有的，因此不是线程安全的
     * @param sb
     */
    private void append2(StringBuilder sb) {
        sb.append(1);
        sb.append(2);
        sb.append(3);
        System.out.println(sb.toString());
    }

    /**
     * 被返回后，有可能 被 其他线程修改
     * @return
     */
    private StringBuilder append3() {
        StringBuilder sb = new StringBuilder();
        sb.append(1);
        sb.append(2);
        sb.append(3);
        System.out.println(sb.toString());
        return sb;
    }

    @Test
    public void testStackThreadSafety() throws InterruptedException {
        StringBuilder sb = new StringBuilder();
        sb.append(4);
        sb.append(5);
        Thread.sleep(2);
        sb.append(6);
        System.out.println("sb = " + sb);
        new Thread(() -> {
            append2(sb);
        }).start();

    }

    private static int count;
    @Test
    public void testStackOverFlow() {
        // 1、栈帧过多，死递归
        // java.lang.StackOverflowError
        try {
            stackOverFlow();
        } catch (Throwable e) {
            e.printStackTrace();
            // count = 10373
            /**
             * Xss256k count = 2179
             * Xss256k count = 4914
             */
            System.out.println("count = " + count);
        }

        // 2、栈帧过大，一个int 4个字节，一个栈帧是1M，一般不会溢出
    }
    private void stackOverFlow() {
        count++;
        stackOverFlow();
    }

    @Test
    public void testStackOverFlowByThirdJar() throws JsonProcessingException {
        Dept d = new Dept();
        d.setName("Market");

        Emp e1 = new Emp();
        e1.setName("zhang");
        e1.setDept(d);

        Emp e2 = new Emp();
        e2.setName("li");
        e2.setDept(d);

        d.setEmps(Arrays.asList(e1, e2));

        // { name: 'Market', emps: [{ name:'zhang', dept:{ name:'', emps: [ {}]} },] }
        //com.fasterxml.jackson.databind.JsonMappingException: Infinite recursion (StackOverflowError) (through reference chain: com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"]->java.util.ArrayList[0]->com.dongfang.advanced.jvm.memorystructure.Emp["dept"]->com.dongfang.advanced.jvm.memorystructure.Dept["emps"])
        // 属性之间循环引用，引起无限递归
        ObjectMapper mapper = new ObjectMapper();
        System.out.println(mapper.writeValueAsString(d));
    }


    class Emp {
        private String name;
        // 员工的部门信息不转json
        @JsonIgnore
        private Dept dept;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public Dept getDept() {
            return dept;
        }

        public void setDept(Dept dept) {
            this.dept = dept;
        }
    }

    class Dept {
        private String name;
        private List<Emp> emps;

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public List<Emp> getEmps() {
            return emps;
        }

        public void setEmps(List<Emp> emps) {
            this.emps = emps;
        }
    }

    /**
     * 定位
     * 用top定位哪个进程对cpu的占用过高
     * ps H -eo pid,tid,%cpu | grep 进程id （用ps命令进一步定位是哪个线程引起的cpu占用过高）
     * jstack 进程id
     * 可以根据线程id 找到有问题的线程，进一步定位到问题代码的源码行号
     */
}
